<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matrix Determinant Sign Calculator</title>
    <script src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; padding: 20px; }
        .container { max-width: 600px; margin: 0 auto; }
        select, button { width: 100%; padding: 10px; margin: 5px 0; }
        table { width: 100%; }
        td { padding: 5px; }
        .alert { background-color: #f0f0f0; border: 1px solid #ddd; padding: 10px; margin-top: 20px; }
    </style>
</head>
<body>
    <div id="root"></div>
    <script type="text/babel">
        const MatrixDeterminantSignCalculator = () => {
            const [matrixSize, setMatrixSize] = React.useState(2);
            const [matrix, setMatrix] = React.useState(Array(5).fill().map(() => Array(5).fill('')));
            const [result, setResult] = React.useState('');

            const handleSizeChange = (e) => {
                setMatrixSize(parseInt(e.target.value));
                setResult('');
            };

            const handleInputChange = (row, col, value) => {
                const newMatrix = [...matrix];
                newMatrix[row][col] = value;
                setMatrix(newMatrix);
                setResult('');
            };

            const calculateDeterminantSign = () => {
                const getSign = (num) => {
                    if (num === '+') return 1;
                    if (num === '-') return -1;
                    if (num === '0') return 0;
                    return null;
                };

                const calculateDeterminant = (m) => {
                    const n = m.length;
                    
                    if (m.flat().some(val => val === null)) return null;
                    
                    if (n === 1) return getSign(m[0][0]);
                    
                    if (n === 2) {
                        const [a, b, c, d] = m.flat().map(getSign);
                        return a * d - b * c;
                    }
                    
                    let det = 0;
                    let hasUndetermined = false;
                    for (let j = 0; j < n; j++) {
                        const subMatrix = m.slice(1).map(row => [...row.slice(0, j), ...row.slice(j + 1)]);
                        const cofactor = getSign(m[0][j]);
                        const subDet = calculateDeterminant(subMatrix);
                        
                        if (subDet === null) {
                            hasUndetermined = true;
                        } else if (cofactor !== 0) {
                            det += (j % 2 === 0 ? 1 : -1) * cofactor * subDet;
                        }
                    }
                    return hasUndetermined ? null : det;
                };

                const detSign = calculateDeterminant(matrix.slice(0, matrixSize).map(row => row.slice(0, matrixSize)));

                if (detSign === null) {
                    setResult("The sign of the determinant is undetermined. This could be due to incomplete or conflicting information.");
                } else if (detSign > 0) {
                    setResult("The determinant is positive.");
                } else if (detSign < 0) {
                    setResult("The determinant is negative.");
                } else {
                    setResult("The determinant is zero. The matrix is singular (not invertible).");
                }
            };

            return (
                <div className="container">
                    <h1>Matrix Determinant Sign Calculator</h1>
                    <div>
                        <label>Matrix Size:</label>
                        <select value={matrixSize} onChange={handleSizeChange}>
                            <option value={2}>2x2</option>
                            <option value={3}>3x3</option>
                            <option value={4}>4x4</option>
                            <option value={5}>5x5</option>
                        </select>
                    </div>
                    <div>
                        <table>
                            <tbody>
                                {[...Array(matrixSize)].map((_, row) => (
                                    <tr key={row}>
                                        {[...Array(matrixSize)].map((_, col) => (
                                            <td key={col}>
                                                <div>
                                                    <span>A<sub>{row + 1}{col + 1}</sub></span>
                                                    <select
                                                        value={matrix[row][col]}
                                                        onChange={(e) => handleInputChange(row, col, e.target.value)}
                                                    >
                                                        <option value="">Select</option>
                                                        <option value="+">+</option>
                                                        <option value="-">-</option>
                                                        <option value="0">0</option>
                                                    </select>
                                                </div>
                                            </td>
                                        ))}
                                    </tr>
                                ))}
                            </tbody>
                        </table>
                    </div>
                    <button onClick={calculateDeterminantSign}>Calculate</button>
                    {result && (
                        <div className="alert">
                            {result}
                        </div>
                    )}
                </div>
            );
        };

        ReactDOM.render(<MatrixDeterminantSignCalculator />, document.getElementById('root'));
    </script>
</body>
</html>
